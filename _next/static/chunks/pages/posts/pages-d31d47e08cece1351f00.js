(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[666],{2802:function(e,t,n){"use strict";var a=n(5988),r=n(5893),o=(new Date).getFullYear();t.Z={footer:(0,r.jsxs)("small",{style:{display:"block",marginTop:"8rem"},className:"jsx-791102496",children:[(0,r.jsx)("time",{className:"jsx-791102496",children:o})," \xa9 Your Name.",(0,r.jsx)("a",{href:"/feed.xml",className:"jsx-791102496",children:"RSS"}),(0,r.jsx)(a.default,{id:"791102496",children:["a.jsx-791102496{float:right;}","@media screen and (max-width:480px){article.jsx-791102496{padding-top:2rem;padding-bottom:4rem;}}"]})]})}},5333:function(e,t,n){"use strict";n.r(t);var a=n(7462),r=n(4925),o=(n(7294),n(3905)),s=n(8941),i=n.n(s),d=n(3805),p=n(2802),l=["components"],m=function(e){return(0,d.withSSG)(i()({filename:"pages.md",route:"/posts/pages",meta:{title:"Next.js Pages",date:"2021/3/18",description:"Learn more about Next.js pages.",tag:"web development",author:"You"},pageMap:[{name:"index",route:"/",frontMatter:{type:"page",title:"About",date:"2021-03-19T00:00:00.000Z"}},{name:"photos",route:"/photos",frontMatter:{type:"page",title:"Photos",date:"2021-03-18T00:00:00.000Z"}},{name:"posts",children:[{name:"index",route:"/posts",frontMatter:{type:"posts",title:"Posts",date:"2021-03-18T00:00:00.000Z"}},{name:"markdown",route:"/posts/markdown",frontMatter:{title:"Markdown Examples",date:"2021/3/19",description:"View examples of all possible Markdown options.",tag:"web development",author:"You"}},{name:"pages",route:"/posts/pages",frontMatter:{title:"Next.js Pages",date:"2021/3/18",description:"Learn more about Next.js pages.",tag:"web development",author:"You"}}],route:"/posts"},{name:"tags",children:[{name:"[tag]",route:"/tags/[tag]",frontMatter:{type:"tag",title:"Tagged Posts"}}],route:"/tags"}]},p.Z))(e)};function u(e){var t=e.components,n=(0,r.Z)(e,l);return(0,o.mdx)(m,(0,a.Z)({components:t},n),(0,o.mdx)("h1",null,"Next.js Pages"),(0,o.mdx)("p",null,"In Next.js, a ",(0,o.mdx)("strong",{parentName:"p"},"page")," is a ",(0,o.mdx)("a",{href:"https://reactjs.org/docs/components-and-props.html",parentName:"p"},"React Component")," exported from a ",(0,o.mdx)("inlineCode",{parentName:"p"},".js"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},".jsx"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},".ts"),", or ",(0,o.mdx)("inlineCode",{parentName:"p"},".tsx")," file in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"pages")," directory. Each page is associated with a route based on its file name."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Example"),": If you create ",(0,o.mdx)("inlineCode",{parentName:"p"},"pages/about.js")," that exports a React component like below, it will be accessible at ",(0,o.mdx)("inlineCode",{parentName:"p"},"/about"),"."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"function About() {\n  return <div>About</div>\n}\n\nexport default About\n")),(0,o.mdx)("h3",null,"Pages with Dynamic Routes"),(0,o.mdx)("p",null,"Next.js supports pages with dynamic routes. For example, if you create a file called ",(0,o.mdx)("inlineCode",{parentName:"p"},"pages/posts/[id].js"),", then it will be accessible at ",(0,o.mdx)("inlineCode",{parentName:"p"},"posts/1"),", ",(0,o.mdx)("inlineCode",{parentName:"p"},"posts/2"),", etc."),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},"To learn more about dynamic routing, check the ",(0,o.mdx)("a",{href:"/docs/routing/dynamic-routes.md",parentName:"p"},"Dynamic Routing documentation"),".")),(0,o.mdx)("h2",null,"Pre-rendering"),(0,o.mdx)("p",null,"By default, Next.js ",(0,o.mdx)("strong",{parentName:"p"},"pre-renders")," every page. This means that Next.js generates HTML for each page in advance, instead of having it all done by client-side JavaScript. Pre-rendering can result in better performance and SEO."),(0,o.mdx)("p",null,"Each generated HTML is associated with minimal JavaScript code necessary for that page. When a page is loaded by the browser, its JavaScript code runs and makes the page fully interactive. (This process is called ",(0,o.mdx)("em",{parentName:"p"},"hydration"),".)"),(0,o.mdx)("h3",null,"Two forms of Pre-rendering"),(0,o.mdx)("p",null,"Next.js has two forms of pre-rendering: ",(0,o.mdx)("strong",{parentName:"p"},"Static Generation")," and ",(0,o.mdx)("strong",{parentName:"p"},"Server-side Rendering"),". The difference is in ",(0,o.mdx)("strong",{parentName:"p"},"when")," it generates the HTML for a page."),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{href:"#static-generation-recommended",parentName:"li"},(0,o.mdx)("strong",{parentName:"a"},"Static Generation (Recommended)")),": The HTML is generated at ",(0,o.mdx)("strong",{parentName:"li"},"build time")," and will be reused on each request."),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("a",{href:"#server-side-rendering",parentName:"li"},(0,o.mdx)("strong",{parentName:"a"},"Server-side Rendering")),": The HTML is generated on ",(0,o.mdx)("strong",{parentName:"li"},"each request"),".")),(0,o.mdx)("p",null,"Importantly, Next.js lets you ",(0,o.mdx)("strong",{parentName:"p"},"choose"),' which pre-rendering form you\'d like to use for each page. You can create a "hybrid" Next.js app by using Static Generation for most pages and using Server-side Rendering for others.'),(0,o.mdx)("p",null,"We ",(0,o.mdx)("strong",{parentName:"p"},"recommend")," using ",(0,o.mdx)("strong",{parentName:"p"},"Static Generation")," over Server-side Rendering for performance reasons. Statically generated pages can be cached by CDN with no extra configuration to boost performance. However, in some cases, Server-side Rendering might be the only option."),(0,o.mdx)("p",null,"You can also use ",(0,o.mdx)("strong",{parentName:"p"},"Client-side Rendering")," along with Static Generation or Server-side Rendering. That means some parts of a page can be rendered entirely by client side JavaScript. To learn more, take a look at the ",(0,o.mdx)("a",{href:"/docs/basic-features/data-fetching.md#fetching-data-on-the-client-side",parentName:"p"},"Data Fetching")," documentation."),(0,o.mdx)("h2",null,"Static Generation (Recommended)"),(0,o.mdx)("p",null,"If a page uses ",(0,o.mdx)("strong",{parentName:"p"},"Static Generation"),", the page HTML is generated at ",(0,o.mdx)("strong",{parentName:"p"},"build time"),". That means in production, the page HTML is generated when you run ",(0,o.mdx)("inlineCode",{parentName:"p"},"next build")," . This HTML will then be reused on each request. It can be cached by a CDN."),(0,o.mdx)("p",null,"In Next.js, you can statically generate pages ",(0,o.mdx)("strong",{parentName:"p"},"with or without data"),". Let's take a look at each case."),(0,o.mdx)("h3",null,"Static Generation without data"),(0,o.mdx)("p",null,"By default, Next.js pre-renders pages using Static Generation without fetching data. Here's an example:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"function About() {\n  return <div>About</div>\n}\n\nexport default About\n")),(0,o.mdx)("p",null,"Note that this page does not need to fetch any external data to be pre-rendered. In cases like this, Next.js generates a single HTML file per page during build time."),(0,o.mdx)("h3",null,"Static Generation with data"),(0,o.mdx)("p",null,"Some pages require fetching external data for pre-rendering. There are two scenarios, and one or both might apply. In each case, you can use a special function Next.js provides:"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},"Your page ",(0,o.mdx)("strong",{parentName:"li"},"content")," depends on external data: Use ",(0,o.mdx)("inlineCode",{parentName:"li"},"getStaticProps"),"."),(0,o.mdx)("li",{parentName:"ol"},"Your page ",(0,o.mdx)("strong",{parentName:"li"},"paths")," depend on external data: Use ",(0,o.mdx)("inlineCode",{parentName:"li"},"getStaticPaths")," (usually in addition to ",(0,o.mdx)("inlineCode",{parentName:"li"},"getStaticProps"),").")),(0,o.mdx)("h4",null,"Scenario 1: Your page ",(0,o.mdx)("strong",{parentName:"h4"},"content")," depends on external data"),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Example"),": Your blog page might need to fetch the list of blog posts from a CMS (content management system)."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"// TODO: Need to fetch `posts` (by calling some API endpoint)\n//       before this page can be pre-rendered.\nfunction Blog({ posts }) {\n  return (\n    <ul>\n      {posts.map((post) => (\n        <li>{post.title}</li>\n      ))}\n    </ul>\n  )\n}\n\nexport default Blog\n")),(0,o.mdx)("p",null,"To fetch this data on pre-render, Next.js allows you to ",(0,o.mdx)("inlineCode",{parentName:"p"},"export")," an ",(0,o.mdx)("inlineCode",{parentName:"p"},"async")," function called ",(0,o.mdx)("inlineCode",{parentName:"p"},"getStaticProps")," from the same file. This function gets called at build time and lets you pass fetched data to the page's ",(0,o.mdx)("inlineCode",{parentName:"p"},"props")," on pre-render."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"function Blog({ posts }) {\n  // Render posts...\n}\n\n// This function gets called at build time\nexport async function getStaticProps() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // By returning { props: { posts } }, the Blog component\n  // will receive `posts` as a prop at build time\n  return {\n    props: {\n      posts\n    }\n  }\n}\n\nexport default Blog\n")),(0,o.mdx)("p",null,"To learn more about how ",(0,o.mdx)("inlineCode",{parentName:"p"},"getStaticProps")," works, check out the ",(0,o.mdx)("a",{href:"/docs/basic-features/data-fetching.md#getstaticprops-static-generation",parentName:"p"},"Data Fetching documentation"),"."),(0,o.mdx)("h4",null,"Scenario 2: Your page paths depend on external data"),(0,o.mdx)("p",null,"Next.js allows you to create pages with ",(0,o.mdx)("strong",{parentName:"p"},"dynamic routes"),". For example, you can create a file called ",(0,o.mdx)("inlineCode",{parentName:"p"},"pages/posts/[id].js")," to show a single blog post based on ",(0,o.mdx)("inlineCode",{parentName:"p"},"id"),". This will allow you to show a blog post with ",(0,o.mdx)("inlineCode",{parentName:"p"},"id: 1")," when you access ",(0,o.mdx)("inlineCode",{parentName:"p"},"posts/1"),"."),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},"To learn more about dynamic routing, check the ",(0,o.mdx)("a",{href:"/docs/routing/dynamic-routes.md",parentName:"p"},"Dynamic Routing documentation"),".")),(0,o.mdx)("p",null,"However, which ",(0,o.mdx)("inlineCode",{parentName:"p"},"id")," you want to pre-render at build time might depend on external data."),(0,o.mdx)("p",null,(0,o.mdx)("strong",{parentName:"p"},"Example"),": suppose that you've only added one blog post (with ",(0,o.mdx)("inlineCode",{parentName:"p"},"id: 1"),") to the database. In this case, you'd only want to pre-render ",(0,o.mdx)("inlineCode",{parentName:"p"},"posts/1")," at build time."),(0,o.mdx)("p",null,"Later, you might add the second post with ",(0,o.mdx)("inlineCode",{parentName:"p"},"id: 2"),". Then you'd want to pre-render ",(0,o.mdx)("inlineCode",{parentName:"p"},"posts/2")," as well."),(0,o.mdx)("p",null,"So your page ",(0,o.mdx)("strong",{parentName:"p"},"paths")," that are pre-rendered depend on external data**.** To handle this, Next.js lets you ",(0,o.mdx)("inlineCode",{parentName:"p"},"export")," an ",(0,o.mdx)("inlineCode",{parentName:"p"},"async")," function called ",(0,o.mdx)("inlineCode",{parentName:"p"},"getStaticPaths")," from a dynamic page (",(0,o.mdx)("inlineCode",{parentName:"p"},"pages/posts/[id].js")," in this case). This function gets called at build time and lets you specify which paths you want to pre-render."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"// This function gets called at build time\nexport async function getStaticPaths() {\n  // Call an external API endpoint to get posts\n  const res = await fetch('https://.../posts')\n  const posts = await res.json()\n\n  // Get the paths we want to pre-render based on posts\n  const paths = posts.map((post) => ({\n    params: { id: post.id }\n  }))\n\n  // We'll pre-render only these paths at build time.\n  // { fallback: false } means other routes should 404.\n  return { paths, fallback: false }\n}\n")),(0,o.mdx)("p",null,"Also in ",(0,o.mdx)("inlineCode",{parentName:"p"},"pages/posts/[id].js"),", you need to export ",(0,o.mdx)("inlineCode",{parentName:"p"},"getStaticProps")," so that you can fetch the data about the post with this ",(0,o.mdx)("inlineCode",{parentName:"p"},"id")," and use it to pre-render the page:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"function Post({ post }) {\n  // Render post...\n}\n\nexport async function getStaticPaths() {\n  // ...\n}\n\n// This also gets called at build time\nexport async function getStaticProps({ params }) {\n  // params contains the post `id`.\n  // If the route is like /posts/1, then params.id is 1\n  const res = await fetch(`https://.../posts/${params.id}`)\n  const post = await res.json()\n\n  // Pass post data to the page via props\n  return { props: { post } }\n}\n\nexport default Post\n")),(0,o.mdx)("p",null,"To learn more about how ",(0,o.mdx)("inlineCode",{parentName:"p"},"getStaticPaths")," works, check out the ",(0,o.mdx)("a",{href:"/docs/basic-features/data-fetching.md#getstaticpaths-static-generation",parentName:"p"},"Data Fetching documentation"),"."),(0,o.mdx)("h3",null,"When should I use Static Generation?"),(0,o.mdx)("p",null,"We recommend using ",(0,o.mdx)("strong",{parentName:"p"},"Static Generation")," (with and without data) whenever possible because your page can be built once and served by CDN, which makes it much faster than having a server render the page on every request."),(0,o.mdx)("p",null,"You can use Static Generation for many types of pages, including:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Marketing pages"),(0,o.mdx)("li",{parentName:"ul"},"Blog posts"),(0,o.mdx)("li",{parentName:"ul"},"E-commerce product listings"),(0,o.mdx)("li",{parentName:"ul"},"Help and documentation")),(0,o.mdx)("p",null,'You should ask yourself: "Can I pre-render this page ',(0,o.mdx)("strong",{parentName:"p"},"ahead")," of a user's request?\" If the answer is yes, then you should choose Static Generation."),(0,o.mdx)("p",null,"On the other hand, Static Generation is ",(0,o.mdx)("strong",{parentName:"p"},"not")," a good idea if you cannot pre-render a page ahead of a user's request. Maybe your page shows frequently updated data, and the page content changes on every request."),(0,o.mdx)("p",null,"In cases like this, you can do one of the following:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Use Static Generation with ",(0,o.mdx)("strong",{parentName:"li"},"Client-side Rendering:")," You can skip pre-rendering some parts of a page and then use client-side JavaScript to populate them. To learn more about this approach, check out the ",(0,o.mdx)("a",{href:"/docs/basic-features/data-fetching.md#fetching-data-on-the-client-side",parentName:"li"},"Data Fetching documentation"),"."),(0,o.mdx)("li",{parentName:"ul"},"Use ",(0,o.mdx)("strong",{parentName:"li"},"Server-Side Rendering:")," Next.js pre-renders a page on each request. It will be slower because the page cannot be cached by a CDN, but the pre-rendered page will always be up-to-date. We'll talk about this approach below.")),(0,o.mdx)("h2",null,"Server-side Rendering"),(0,o.mdx)("blockquote",null,(0,o.mdx)("p",{parentName:"blockquote"},'Also referred to as "SSR" or "Dynamic Rendering".')),(0,o.mdx)("p",null,"If a page uses ",(0,o.mdx)("strong",{parentName:"p"},"Server-side Rendering"),", the page HTML is generated on ",(0,o.mdx)("strong",{parentName:"p"},"each request"),"."),(0,o.mdx)("p",null,"To use Server-side Rendering for a page, you need to ",(0,o.mdx)("inlineCode",{parentName:"p"},"export")," an ",(0,o.mdx)("inlineCode",{parentName:"p"},"async")," function called ",(0,o.mdx)("inlineCode",{parentName:"p"},"getServerSideProps"),". This function will be called by the server on every request."),(0,o.mdx)("p",null,"For example, suppose that your page needs to pre-render frequently updated data (fetched from an external API). You can write ",(0,o.mdx)("inlineCode",{parentName:"p"},"getServerSideProps")," which fetches this data and passes it to ",(0,o.mdx)("inlineCode",{parentName:"p"},"Page")," like below:"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"function Page({ data }) {\n  // Render data...\n}\n\n// This gets called on every request\nexport async function getServerSideProps() {\n  // Fetch data from external API\n  const res = await fetch(`https://.../data`)\n  const data = await res.json()\n\n  // Pass data to the page via props\n  return { props: { data } }\n}\n\nexport default Page\n")),(0,o.mdx)("p",null,"As you can see, ",(0,o.mdx)("inlineCode",{parentName:"p"},"getServerSideProps")," is similar to ",(0,o.mdx)("inlineCode",{parentName:"p"},"getStaticProps"),", but the difference is that ",(0,o.mdx)("inlineCode",{parentName:"p"},"getServerSideProps")," is run on every request instead of on build time."),(0,o.mdx)("p",null,"To learn more about how ",(0,o.mdx)("inlineCode",{parentName:"p"},"getServerSideProps")," works, check out our ",(0,o.mdx)("a",{href:"/docs/basic-features/data-fetching.md#getserversideprops-server-side-rendering",parentName:"p"},"Data Fetching documentation")),(0,o.mdx)("h2",null,"Summary"),(0,o.mdx)("p",null,"We've discussed two forms of pre-rendering for Next.js."),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},"Static Generation (Recommended):")," The HTML is generated at ",(0,o.mdx)("strong",{parentName:"li"},"build time")," and will be reused on each request. To make a page use Static Generation, either export the page component, or export ",(0,o.mdx)("inlineCode",{parentName:"li"},"getStaticProps")," (and ",(0,o.mdx)("inlineCode",{parentName:"li"},"getStaticPaths")," if necessary). It's great for pages that can be pre-rendered ahead of a user's request. You can also use it with Client-side Rendering to bring in additional data."),(0,o.mdx)("li",{parentName:"ul"},(0,o.mdx)("strong",{parentName:"li"},"Server-side Rendering:")," The HTML is generated on ",(0,o.mdx)("strong",{parentName:"li"},"each request"),". To make a page use Server-side Rendering, export ",(0,o.mdx)("inlineCode",{parentName:"li"},"getServerSideProps"),". Because Server-side Rendering results in slower performance than Static Generation, use this only if absolutely necessary.")))}u.isMDXComponent=!0,t.default=u},7265:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/pages",function(){return n(5333)}])}},function(e){e.O(0,[774,847,888,179],(function(){return t=7265,e(e.s=t);var t}));var t=e.O();_N_E=t}]);